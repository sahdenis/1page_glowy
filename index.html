<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glowy.md - Catalog de pƒÉturi magice</title>
    <meta name="description" content="PƒÉturi care lumineazƒÉ √Æn √Æntuneric. Catalog online.">
    <link rel="icon" type="image/png" href="https://ihegootehofxyltq.public.blob.vercel-storage.com/favicon.png" />
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZQLJNECB22"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-ZQLJNECB22');
    </script>
    
    <script src="products.js"></script>
    <script src="translations.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { glowy: { light: '#a5b4fc', DEFAULT: '#6366f1', dark: '#f472b6', pink: '#f472b6' } },
                    fontFamily: { sans: ['Nunito', 'sans-serif'] },
                    animation: { 'fade-in-up': 'fadeInUp 0.3s ease-out' },
                    keyframes: { fadeInUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } } }
                }
            }
        }
    </script>
    <style>
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .glow-text { text-shadow: 0 0 15px rgba(99, 102, 241, 0.4); }
        .pulse-btn { animation: pulse-glow 2s infinite; }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 0 0 rgba(244, 114, 182, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(244, 114, 182, 0); } }
        html { scroll-behavior: smooth; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        
        .size-btn { border: 1px solid #e5e7eb; background: #f9fafb; color: #374151; }
        .size-btn:hover { border-color: #6366f1; color: #6366f1; }
        .size-btn.active { background-color: #6366f1; color: white; border-color: #6366f1; }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–ª–∞–π–¥–µ—Ä–∞ */
        .slider-arrow {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 30px; height: 30px; background: rgba(255,255,255,0.8);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            cursor: pointer; z-index: 20; color: #333; transition: 0.2s;
            opacity: 0; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .group:hover .slider-arrow { opacity: 1; }
        .slider-arrow:hover { background: white; color: #6366f1; transform: translateY(-50%) scale(1.1); }
        .slider-prev { left: 10px; }
        .slider-next { right: 10px; }

        .thumb { border: 2px solid transparent; transition: all 0.2s; cursor: pointer; opacity: 0.6; }
        .thumb.active, .thumb:hover { border-color: #6366f1; opacity: 1; }
    </style>
</head>
<body class="font-sans text-gray-700 bg-gray-50 flex flex-col min-h-screen">

    <header class="fixed w-full top-0 z-50 glass shadow-sm transition-all duration-300">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="#" class="flex items-center gap-2 group">
               <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-pink-400 rounded-full overflow-hidden flex items-center justify-center shadow-lg group-hover:scale-105 transition">
                  <img src="https://ihegootehofxyltq.public.blob.vercel-storage.com/glowy_logo.png" class="w-full h-full object-cover rounded-full" alt="Logo"/>
               </div>
               <span class="text-2xl font-extrabold text-glowy-dark tracking-wide group-hover:text-glowy transition">GLOWY</span>
            </a>

            <div class="flex items-center gap-4 text-sm">
                <button onclick="setLanguage('ro')" class="font-bold hover:text-glowy transition" id="btn-ro">RO</button> 
                <span class="text-gray-300">|</span>
                <button onclick="setLanguage('ru')" class="font-bold text-gray-400 hover:text-glowy transition" id="btn-ru">RU</button>
            </div>

            <nav class="hidden md:flex gap-8 font-bold text-gray-600 ml-8 text-sm uppercase tracking-wide">
                <a href="#about" class="hover:text-glowy-pink transition relative group"><span data-i18n="nav_about">Despre noi</span></a>
                <a href="#catalog" class="hover:text-glowy-pink transition relative group"><span data-i18n="nav_catalog">Colec»õie</span></a>
                <a href="#delivery" class="hover:text-glowy-pink transition relative group"><span data-i18n="nav_delivery">Livrare</span></a>
                <a href="#contacts" class="hover:text-glowy-pink transition relative group"><span data-i18n="nav_contacts">Contacte</span></a>
            </nav>
        </div>
    </header>

    <section class="mt-16 relative h-[500px] overflow-hidden">
        <div class="absolute inset-0 bg-gray-900">
            <img src="https://ihegootehofxyltq.public.blob.vercel-storage.com/top_baners/1440_432.png" alt="Glowy Banner" class="w-full h-full object-cover opacity-60 animate-[pulse_10s_infinite_alternate]">
            <div class="absolute inset-0 bg-gradient-to-t from-gray-900/80 via-transparent to-transparent"></div>
            <div class="absolute inset-0 flex items-center justify-center text-center">
                <div class="text-white px-4 max-w-3xl">
                    <h1 class="text-4xl md:text-6xl font-extrabold mb-6 glow-text leading-tight" data-i18n="hero_title">Magia care √ÆncƒÉlze»ôte</h1>
                    <p class="text-lg md:text-2xl mb-10 text-gray-100 font-light" data-i18n="hero_subtitle">DescoperƒÉ colec»õia noastrƒÉ de pƒÉturi luminescente.</p>
                    <a href="#catalog" class="bg-white text-glowy-dark hover:bg-glowy-pink hover:text-white font-bold py-4 px-10 rounded-full transition-all shadow-xl"><span data-i18n="hero_btn">Vezi colec»õia</span></a>
                </div>
            </div>
        </div>
    </section>

    <section id="catalog" class="py-20 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4" data-i18n="catalog_title">Colec»õia NoastrƒÉ ‚ú®</h2>
                <div class="w-24 h-1 bg-glowy mx-auto rounded-full"></div>
            </div>
            <div id="products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10"></div>
            <div class="text-center mt-16" id="catalogBtnContainer">
                <button onclick="toggleFullCatalog()" id="catalogBtn" class="group relative px-8 py-3 font-bold text-glowy transition-colors uppercase tracking-wider">
                    <span class="absolute inset-0 border-2 border-glowy rounded-full"></span>
                    <span class="relative group-hover:text-glowy-dark transition-colors" data-i18n="btn_full_catalog">AratƒÉ tot</span>
                </button>
            </div>
            <div id="full-catalog-grid" class="hidden mt-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 transition-all"></div>
        </div>
    </section>

    <section class="py-10 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div onclick="openContactPopup(null, 'Promo: Set + Rucsac')" class="relative rounded-2xl overflow-hidden h-64 shadow-md group cursor-pointer transform hover:scale-[1.02] transition">
                    <img src="https://ihegootehofxyltq.public.blob.vercel-storage.com/baners/Gemini_Generated_Image_fipvh1fipvh1fipv%20%281%29.png" alt="Set Cadou Rucsac" class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex flex-col justify-end p-8">
                        <h3 class="text-white text-2xl font-bold mb-1" data-i18n="banner1_title">Set Avantajos!</h3>
                        <p class="text-white mb-4" data-i18n="banner1_desc">PƒÉturƒÉ + Rucsac doar la +28 MDL</p>
                        <span class="bg-white text-glowy-pink font-bold px-4 py-2 rounded-lg w-max text-sm shadow-lg" data-i18n="btn_ask_details">√éntreabƒÉ detalii</span>
                    </div>
                </div>
                <div onclick="openContactPopup(null, 'Promo: Ambalaj Cadou')" class="relative rounded-2xl overflow-hidden h-64 shadow-md group cursor-pointer transform hover:scale-[1.02] transition">
                    <img src="https://ihegootehofxyltq.public.blob.vercel-storage.com/baners/Gemini_Generated_Image_jwcu3hjwcu3hjwcu%20%281%29.png" alt="Ambalaj Cadou" class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex flex-col justify-end p-8">
                        <h3 class="text-white text-2xl font-bold mb-1" data-i18n="banner2_title">Gata de dƒÉruit</h3>
                        <p class="text-white mb-4" data-i18n="banner2_desc">Ambalaj cu panglicƒÉ de satin</p>
                        <span class="bg-white text-glowy-dark font-bold px-4 py-2 rounded-lg w-max text-sm shadow-lg" data-i18n="btn_want_pack">Vreau ambalaj</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="py-16 bg-gradient-to-b from-white to-blue-50/30">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4" data-i18n="how_title">Cum func»õioneazƒÉ magia? ‚ú®</h2>
                <p class="text-gray-500 max-w-2xl mx-auto" data-i18n="how_subtitle">Este simplu! UrmeazƒÉ 3 pa»ôi.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto relative">
                <div class="bg-white p-8 rounded-2xl shadow-sm hover:shadow-xl transition duration-300 text-center group border border-gray-50">
                    <div class="w-20 h-20 mx-auto bg-yellow-100 text-yellow-500 rounded-full flex items-center justify-center text-4xl mb-6 group-hover:scale-110 transition"><i class="fa-regular fa-sun animate-[spin_10s_linear_infinite]"></i></div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3" data-i18n="step1_head">1. √éncarcƒÉ</h3>
                    <p class="text-gray-600 text-sm leading-relaxed" data-i18n="step1_body">LasƒÉ pƒÉtura la lumina.</p>
                </div>
                <div class="bg-white p-8 rounded-2xl shadow-sm hover:shadow-xl transition duration-300 text-center group border border-gray-50">
                    <div class="w-20 h-20 mx-auto bg-blue-100 text-blue-500 rounded-full flex items-center justify-center text-4xl mb-6 group-hover:scale-110 transition"><i class="fa-solid fa-hourglass-half"></i></div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3" data-i18n="step2_head">2. A»ôteaptƒÉ</h3>
                    <p class="text-gray-600 text-sm leading-relaxed" data-i18n="step2_body">Materialul absoarbe lumina.</p>
                </div>
                <div class="bg-white p-8 rounded-2xl shadow-sm hover:shadow-xl transition duration-300 text-center group border border-gray-50">
                    <div class="w-20 h-20 mx-auto bg-indigo-100 text-glowy rounded-full flex items-center justify-center text-4xl mb-6 group-hover:scale-110 transition"><i class="fa-solid fa-moon"></i></div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3" data-i18n="step3_head">3. Magie!</h3>
                    <p class="text-gray-600 text-sm leading-relaxed" data-i18n="step3_body">Stinge lumina »ôi bucurƒÉ-te!</p>
                </div>
            </div>
        </div>
    </section>

    <section id="about" class="py-16 bg-white">
        <div class="container mx-auto px-4 max-w-4xl text-center">
            <h2 class="text-3xl font-bold mb-8 text-glowy-dark" data-i18n="about_title">Bine a»õi venit la Glowy.md!</h2>
            <div class="text-lg text-gray-600 leading-relaxed space-y-6 text-justify md:text-center" data-i18n="about_text"></div>
            
            <div class="mt-10 flex flex-wrap justify-center gap-4">
                <div class="flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-full text-sm font-bold text-gray-500 border border-gray-100">
                    <i class="fa-solid fa-check text-green-500"></i> <span data-i18n="trust_quality">Calitate Premium</span>
                </div>
                <div class="flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-full text-sm font-bold text-gray-500 border border-gray-100">
                    <i class="fa-solid fa-check text-green-500"></i> <span data-i18n="trust_hypo">Hipoalergenic</span>
                </div>
                <div class="flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-full text-sm font-bold text-gray-500 border border-gray-100">
                    <i class="fa-solid fa-check text-green-500"></i> <span data-i18n="trust_delivery">Livrare SigurƒÉ</span>
                </div>
            </div>
        </div>
    </section>

    <section id="delivery" class="py-16 bg-blue-50">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start max-w-5xl mx-auto">
                <div>
                    <h3 class="text-2xl font-bold mb-6 text-gray-800 flex items-center gap-3 justify-center md:justify-start">
                        <i class="fa-solid fa-truck-fast text-glowy"></i> <span data-i18n="delivery_title">Livrare RapidƒÉ</span>
                    </h3>
                    <div class="prose text-gray-600 leading-relaxed text-center md:text-left" data-i18n="delivery_text"></div>
                </div>
                <div>
                    <h3 class="text-2xl font-bold mb-6 text-gray-800 flex items-center gap-3 justify-center md:justify-start">
                        <i class="fa-regular fa-credit-card text-glowy"></i> <span data-i18n="payment_title">PlatƒÉ ComodƒÉ</span>
                    </h3>
                    <div class="prose text-gray-600 leading-relaxed text-center md:text-left" data-i18n="payment_text"></div>
                </div>
            </div>
        </div>
    </section>

    <footer id="contacts" class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-4 grid md:grid-cols-3 gap-8 text-center md:text-left">
            <div>
                <h4 class="text-xl font-bold mb-4 text-glowy-light">Glowy.md</h4>
                <p class="text-gray-400 text-sm" data-i18n="footer_desc">Magia care aduce z√¢mbete copiilor prin luminƒÉ »ôi confort.</p>
            </div>
            <div>
                <h4 class="text-xl font-bold mb-4 text-glowy-light" data-i18n="nav_contacts">Contacte</h4>
                <ul class="space-y-3 text-gray-300">
                    <li><a href="tel:+37361209209" class="hover:text-glowy-light transition flex items-center justify-center md:justify-start gap-2"><i class="fa-solid fa-phone"></i> <span>+373-61-209-209</span></a></li>
                    <li><a href="mailto:glowyblankets@gmail.com" class="hover:text-glowy-light transition flex items-center justify-center md:justify-start gap-2"><i class="fa-solid fa-envelope"></i> <span>glowyblankets@gmail.com</span></a></li>
                    <li><a href="#" class="hover:text-glowy-light transition flex items-center justify-center md:justify-start gap-2 pointer-events-none"><i class="fa-solid fa-location-dot"></i> <span>Chi»ôinƒÉu, Moldova</span></a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-xl font-bold mb-4 text-glowy-light">Social</h4>
                <div class="flex gap-6 justify-center md:justify-start text-3xl">
                    <a href="https://www.instagram.com/glowy.md/" target="_blank" class="hover:text-glowy-pink transition"><i class="fa-brands fa-instagram"></i></a>
                    <a href="https://www.facebook.com/profile.php?id=61568285020622" target="_blank" class="hover:text-blue-500 transition"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="https://www.tiktok.com/@glowy.md8" target="_blank" class="hover:text-white transition"><i class="fa-brands fa-tiktok"></i></a>
                </div>
            </div>
        </div>
        <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-500 text-xs">
            &copy; 2025 Glowy.md. All rights reserved.
        </div>
    </footer>

    <button onclick="openContactPopup(null, 'General')" class="fixed bottom-6 right-6 bg-glowy-pink hover:bg-pink-600 text-white w-14 h-14 rounded-full shadow-2xl z-40 pulse-btn flex items-center justify-center transition transform hover:scale-110 group">
        <i class="fa-solid fa-comment-dots text-2xl group-hover:rotate-12 transition"></i>
    </button>

    <div id="productModal" class="fixed inset-0 bg-black/60 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm transition-opacity" onclick="if(event.target.id==='productModal') closeModal('productModal')">
        <div class="bg-white rounded-2xl w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 overflow-hidden shadow-2xl relative h-[90vh] md:h-auto animate-fade-in-up">
            <button onclick="closeModal('productModal')" class="absolute top-4 right-4 bg-gray-100 w-8 h-8 rounded-full hover:bg-gray-200 z-10 flex items-center justify-center transition"><i class="fa-solid fa-times"></i></button>
            
            <div class="bg-gray-50 p-6 flex flex-col justify-center items-center h-full relative">
                <div class="relative w-full aspect-square bg-white rounded-lg shadow-sm overflow-hidden group">
                    <img id="mImg" src="" class="w-full h-full object-contain cursor-zoom-in">
                    <div id="modalArrows" class="hidden">
                        <div class="slider-arrow slider-prev" onclick="changeModalImage(-1)"><i class="fa-solid fa-chevron-left"></i></div>
                        <div class="slider-arrow slider-next" onclick="changeModalImage(1)"><i class="fa-solid fa-chevron-right"></i></div>
                    </div>
                </div>
                <div id="mThumbnails" class="flex gap-2 mt-4 overflow-x-auto w-full px-1 scrollbar-hide justify-center"></div>
            </div>
            
            <div class="p-8 flex flex-col overflow-y-auto">
                <h2 id="mTitle" class="text-2xl md:text-3xl font-bold mb-3 text-gray-800"></h2>
                
                <div class="mb-6">
                    <p class="text-xs text-gray-400 uppercase font-bold tracking-wider mb-2" data-i18n="label_size">Alege Dimensiunea:</p>
                    <div id="sizeContainer" class="flex flex-wrap gap-2"></div>
                </div>

                <div class="mb-6 bg-blue-50/50 p-4 rounded-xl border border-blue-50 inline-block w-full">
                    <p class="text-xs text-gray-500 mb-1" data-i18n="price_label">Pre»õ estimativ:</p>
                    <div id="mPriceContainer" class="flex items-baseline gap-2"></div>
                </div>
                
                <div id="mDesc" class="text-gray-600 mb-8 leading-relaxed text-sm md:text-base border-t pt-4"></div>
                
                <button id="modalActionBtn" class="w-full bg-glowy hover:bg-glowy-dark text-white font-bold py-4 rounded-xl shadow-lg transition mt-auto flex items-center justify-center gap-2 group">
                    <span data-i18n="btn_interest">MƒÉ intereseazƒÉ</span> 
                    <i class="fa-regular fa-paper-plane group-hover:translate-x-1 transition"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="contactModal" class="fixed inset-0 bg-black/80 z-[60] hidden flex items-center justify-center p-4 backdrop-blur-sm" onclick="if(event.target.id==='contactModal') document.getElementById('contactModal').classList.add('hidden')">
        <div class="bg-white rounded-2xl w-full max-w-sm p-6 shadow-2xl relative transform transition-all scale-100 animate-fade-in-up">
            <button onclick="document.getElementById('contactModal').classList.add('hidden')" class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100"><i class="fa-solid fa-times"></i></button>
            
            <div class="text-center mb-6">
                <div class="w-14 h-14 bg-glowy-light/20 text-glowy rounded-full flex items-center justify-center mx-auto mb-3 text-2xl"><i class="fa-regular fa-comments"></i></div>
                <h3 class="text-xl font-bold text-gray-800" data-i18n="contact_title">DiscutƒÉ cu noi</h3>
                <p class="text-xs text-gray-400 mt-2 uppercase tracking-wide">Despre:</p>
                <p class="text-sm font-bold text-glowy-dark mt-1" id="contactProductInfo"></p>
            </div>

            <div class="flex flex-col gap-3">
                <a id="popWA" href="#" target="_blank" class="flex items-center justify-center gap-3 p-3 rounded-xl bg-[#25D366] text-white hover:bg-[#20bd5a] transition font-bold shadow-md"><i class="fa-brands fa-whatsapp text-xl"></i> WhatsApp</a>
                <a id="popTG" href="#" target="_blank" class="flex items-center justify-center gap-3 p-3 rounded-xl bg-[#0088cc] text-white hover:bg-[#0077b5] transition font-bold shadow-md"><i class="fa-brands fa-telegram text-xl"></i> Telegram</a>
                <a id="popVB" href="#" target="_blank" class="flex items-center justify-center gap-3 p-3 rounded-xl bg-[#7360f2] text-white hover:bg-[#6855e0] transition font-bold shadow-md"><i class="fa-brands fa-viber text-xl"></i> Viber</a>
                <button onclick="openOrderFormFromPopup()" class="mt-3 text-gray-400 text-xs hover:text-gray-600 underline py-2 transition"><span data-i18n="btn_use_form">Sau scrie un mesaj aici</span></button>
            </div>
            
            <div class="mt-6 bg-gray-50 border border-gray-100 rounded-lg p-3 text-center">
                <p class="text-xs text-gray-500 leading-relaxed" data-i18n="bulk_hint">VƒÉ rƒÉspundem rapid la orice √Æntrebare legatƒÉ de stoc sau expediere.</p>
            </div>
        </div>
    </div>

    <div id="orderModal" class="fixed inset-0 bg-black/80 z-[70] hidden flex items-center justify-center p-4 backdrop-blur-sm" onclick="if(event.target.id==='orderModal') closeModal('orderModal')">
        <div class="bg-white rounded-2xl w-full max-w-md p-8 shadow-2xl relative animate-fade-in-up">
            <button onclick="closeModal('orderModal')" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><i class="fa-solid fa-times text-xl"></i></button>
            <h3 class="text-2xl font-bold text-center mb-2 text-gray-800" data-i18n="form_title">Scrie-ne un mesaj</h3>
            <p class="text-center text-sm text-gray-500 mb-6" data-i18n="form_subtitle">LƒÉsa»õi datele »ôi vƒÉ contactƒÉm noi.</p>
            
            <form onsubmit="submitForm(event)" class="space-y-4">
                <input type="hidden" id="formSubject">
                <input type="hidden" id="formSize">
                
                <div class="bg-gray-50 p-3 rounded-lg border border-gray-100 text-center">
                    <span class="text-xs text-gray-400 uppercase">Subiect:</span>
                    <p class="font-bold text-gray-700 text-sm" id="displayProduct"></p>
                </div>

                <div class="space-y-3">
                    <input type="text" id="inpName" required placeholder="Numele Dvs." class="w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 outline-none">
                    <input type="tel" id="inpPhone" required placeholder="NumƒÉr de telefon" class="w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 outline-none">
                    <input type="email" id="inpEmail" placeholder="Email (op»õional)" class="w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 outline-none">
                    <textarea id="inpAddress" rows="3" placeholder="√éntrebarea sau mesajul Dvs..." class="w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 outline-none"></textarea>
                </div>
                
                <button type="submit" id="submitBtn" class="w-full bg-glowy hover:bg-glowy-dark text-white font-bold py-4 rounded-xl shadow-md transition" data-i18n="btn_send">Trimite mesajul</button>
            </form>
        </div>
    </div>

    <script>
        let currentLang = 'ro';
        let tempSelectedProduct = null;
        let currentProduct = null;
        let currentPrice = 0;
        let selectedSizeLabel = "";
        let currentModalImageIndex = 0;

        // --- BACKEND CONSTANTS (USER PROVIDED) ---
        // Note: These variables must be replaced during build time or manually!
        const TG_TOKEN = typeof TG_TOKEN_var !== 'undefined' ? TG_TOKEN_var : ''; 
        const TG_CHAT_ID = typeof TG_CHAT_ID_var !== 'undefined' ? TG_CHAT_ID_var : ''; 
        const GOOGLE_SCRIPT_URL = typeof GOOGLE_SCRIPT_URL_var !== 'undefined' ? GOOGLE_SCRIPT_URL_var : ''; 

        // --- LANGUAGE & INIT ---
        function setLanguage(lang) {
            const url = new URL(window.location);
            url.searchParams.set('lang', lang);
            window.history.pushState({}, '', url);
            changeLang(lang);
        }

        function changeLang(lang) {
            currentLang = lang;
            document.getElementById('btn-ro').className = lang === 'ro' ? "font-bold text-glowy underline" : "font-bold text-gray-400 hover:text-glowy";
            document.getElementById('btn-ru').className = lang === 'ru' ? "font-bold text-glowy underline" : "font-bold text-gray-400 hover:text-glowy";
            
            const t = uiTexts[lang];
            if(t) {
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (t[key]) el.innerHTML = t[key];
                });
            }
            renderProducts();
        }

        function renderProducts() {
            const bestGrid = document.getElementById('products-grid');
            const fullGrid = document.getElementById('full-catalog-grid');
            bestGrid.innerHTML = ''; fullGrid.innerHTML = '';

            if (typeof products === 'undefined') return;

            const activeProducts = products.filter(p => p.visible !== false).sort((a, b) => (b.priority || 5) - (a.priority || 5));

            activeProducts.forEach((p, index) => {
                const name = currentLang === 'ro' ? p.nameRO : p.nameRU;
                const desc = currentLang === 'ro' ? p.descRO : p.descRU;
                const btnText = uiTexts[currentLang].btn_details; 
                const img = p.images[0];
                const size = p.sizes.find(s => s.visible) || p.sizes[0];
                
                let priceHTML = '';
                if (size.old_price && size.old_price > size.price) {
                     priceHTML = `<div class="flex flex-col items-end leading-none"><span class="text-xs text-gray-400 line-through">${size.old_price} MDL</span><span class="text-lg font-bold text-red-500">${size.price} MDL</span></div>`;
                } else {
                     priceHTML = `<span class="text-lg font-bold text-gray-600">${size.price} MDL</span>`;
                }

                let badgeHTML = '';
                if (p.tag && tagTranslations[currentLang][p.tag]) {
                    const tagName = tagTranslations[currentLang][p.tag];
                    let bgClass = 'bg-red-500'; 
                    if(p.tag === 'new') bgClass = 'bg-emerald-500';
                    if(p.tag === 'hit') bgClass = 'bg-orange-500';
                    badgeHTML = `<div class="absolute top-3 left-3 ${bgClass} text-white text-[10px] font-extrabold px-3 py-1 rounded-full shadow-md z-10 uppercase tracking-widest animate-pulse">${tagName}</div>`;
                }

                let arrowsHTML = '';
                if (p.images.length > 1) {
                    arrowsHTML = `<div class="slider-arrow slider-prev" onclick="changeCardImage(event, ${p.id}, -1)"><i class="fa-solid fa-chevron-left"></i></div><div class="slider-arrow slider-next" onclick="changeCardImage(event, ${p.id}, 1)"><i class="fa-solid fa-chevron-right"></i></div>`;
                }

                const cardHTML = `
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden group flex flex-col h-full hover:shadow-xl transition duration-300">
                        <div class="relative w-full aspect-square bg-gray-50 overflow-hidden cursor-pointer" onclick="openProduct(${p.id})">
                             ${badgeHTML} ${arrowsHTML}
                             <img id="card-img-${p.id}" src="${img}" data-index="0" class="w-full h-full object-cover transition duration-500">
                        </div>
                        <div class="p-6 flex flex-col flex-grow">
                            <h3 class="text-xl font-bold mb-2 text-gray-800 leading-tight cursor-pointer hover:text-glowy transition" onclick="openProduct(${p.id})">${name}</h3>
                            <p class="text-sm text-gray-500 mb-4 line-clamp-2 h-10 leading-relaxed">${desc}</p>
                            <div class="mt-auto flex justify-between items-center border-t border-gray-100 pt-4">
                                ${priceHTML} 
                                <button onclick="openProduct(${p.id})" class="text-glowy font-bold text-sm hover:text-glowy-dark transition flex items-center gap-2 group-btn">${btnText} <i class="fa-solid fa-arrow-right transform group-btn-hover:translate-x-1 transition"></i></button>
                            </div>
                        </div>
                    </div>
                `;
                if (index < 6) bestGrid.insertAdjacentHTML('beforeend', cardHTML);
                else fullGrid.insertAdjacentHTML('beforeend', cardHTML);
            });
            
            const container = document.getElementById('catalogBtnContainer');
            if(container) container.style.display = activeProducts.length <= 6 ? 'none' : 'block';
        }

        function changeCardImage(event, productId, direction) {
            event.stopPropagation();
            const p = products.find(x => x.id === productId);
            const imgEl = document.getElementById(`card-img-${productId}`);
            let idx = parseInt(imgEl.getAttribute('data-index')) || 0;
            idx += direction;
            if (idx < 0) idx = p.images.length - 1;
            if (idx >= p.images.length) idx = 0;
            imgEl.src = p.images[idx];
            imgEl.setAttribute('data-index', idx);
        }

        function toggleFullCatalog() {
            const grid = document.getElementById('full-catalog-grid');
            const btn = document.querySelector('#catalogBtn span:nth-child(2)');
            if (grid.classList.contains('hidden')) {
                grid.classList.remove('hidden');
                grid.classList.add('animate-fade-in-up');
                btn.innerHTML = currentLang === 'ro' ? 'Ascunde' : '–°–∫—Ä—ã—Ç—å';
            } else {
                grid.classList.add('hidden');
                grid.classList.remove('animate-fade-in-up');
                btn.innerHTML = currentLang === 'ro' ? 'AratƒÉ tot' : '–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å—ë';
                document.getElementById('catalog').scrollIntoView({behavior: 'smooth'});
            }
        }

        function openProduct(id) {
            const p = products.find(x => x.id === id);
            currentProduct = p;
            currentModalImageIndex = 0;
            
            const name = currentLang === 'ro' ? p.nameRO : p.nameRU;
            const desc = currentLang === 'ro' ? p.descRO : p.descRU;
            
            document.getElementById('mTitle').innerText = name;
            document.getElementById('mDesc').innerText = desc;
            updateModalDisplay();

            const thumbCont = document.getElementById('mThumbnails');
            thumbCont.innerHTML = '';
            if(p.images.length > 1) {
                p.images.forEach((img, idx) => {
                    const t = document.createElement('img');
                    t.src = img;
                    t.className = `w-16 h-16 object-cover rounded-md thumb ${idx===0?'active':''}`;
                    t.onclick = () => { currentModalImageIndex = idx; updateModalDisplay(); };
                    thumbCont.appendChild(t);
                });
                document.getElementById('modalArrows').classList.remove('hidden');
            } else {
                document.getElementById('modalArrows').classList.add('hidden');
            }
            
            const sizeCont = document.getElementById('sizeContainer');
            sizeCont.innerHTML = '';
            p.sizes.filter(s => s.visible).forEach((size, idx) => {
                const btn = document.createElement('button');
                btn.className = `size-btn px-4 py-2 rounded-lg text-sm font-bold transition shadow-sm ${idx===0 ? 'active' : ''}`;
                btn.innerText = size.label;
                btn.onclick = () => selectSize(size, btn);
                sizeCont.appendChild(btn);
                if(idx === 0) selectSize(size, btn);
            });

            const actionBtn = document.getElementById('modalActionBtn');
            actionBtn.onclick = function() {
                 closeModal('productModal');
                 openContactPopup(p.id, selectedSizeLabel, currentPrice);
            };
            document.getElementById('productModal').classList.remove('hidden');
        }

        function updateModalDisplay() {
            const imgEl = document.getElementById('mImg');
            imgEl.src = currentProduct.images[currentModalImageIndex];
            const thumbs = document.querySelectorAll('#mThumbnails .thumb');
            thumbs.forEach((t, i) => {
                if(i === currentModalImageIndex) t.classList.add('active');
                else t.classList.remove('active');
            });
        }

        function changeModalImage(dir) {
            currentModalImageIndex += dir;
            if(currentModalImageIndex < 0) currentModalImageIndex = currentProduct.images.length - 1;
            if(currentModalImageIndex >= currentProduct.images.length) currentModalImageIndex = 0;
            updateModalDisplay();
        }

        function selectSize(size, btn) {
            currentPrice = size.price;
            selectedSizeLabel = size.label;
            const priceContainer = document.getElementById('mPriceContainer');
            if (size.old_price && size.old_price > size.price) {
                priceContainer.innerHTML = `<span class="text-xl text-gray-400 line-through mr-2">${size.old_price} MDL</span><span class="text-3xl font-bold text-red-500">${size.price} MDL</span>`;
            } else {
                priceContainer.innerHTML = `<span class="text-3xl font-bold text-glowy">${size.price} MDL</span>`;
            }
            document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
            if(btn) btn.classList.add('active');
        }

        function closeModal(id) { document.getElementById(id).classList.add('hidden'); }

        function openContactPopup(prodId, sizeLabel = '', price = 0) {
            let infoText = "", messageText = "";
            
            // Set values for global vars used in Form
            if (prodId) {
                if (typeof prodId === 'string' && prodId.startsWith('Promo')) {
                   tempSelectedProduct = { name: prodId };
                   infoText = prodId;
                   messageText = prodId;
                } else {
                   const p = products.find(x => x.id === prodId);
                   const name = currentLang === 'ro' ? p.nameRO : p.nameRU;
                   tempSelectedProduct = { name: name };
                   infoText = `${name}`;
                   messageText = `${name} (${sizeLabel}) - ${price} MDL`;
                }
            } else {
                tempSelectedProduct = { name: (currentLang==='ro' ? "√éntrebare generalƒÉ" : "–û–±—â–∏–π –≤–æ–ø—Ä–æ—Å") };
                infoText = currentLang === 'ro' ? "√éntrebare generalƒÉ" : "–í–æ–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä—É";
                messageText = infoText;
            }
            
            document.getElementById('formSize').value = sizeLabel || ''; // Store size
            document.getElementById('contactProductInfo').innerText = infoText;
            updatePopupLinks(messageText);
            document.getElementById('contactModal').classList.remove('hidden');
        }

        function updatePopupLinks(subject) {
            const phone = "37361209209"; 
            let msg = "";
            if(currentLang === 'ro') {
                msg = `Salut! MƒÉ intereseazƒÉ: ${subject}. Ave»õi √Æn stoc?`;
            } else {
                msg = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ú–µ–Ω—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç: ${subject}. –ï—Å—Ç—å –≤ –Ω–∞–ª–∏—á–∏–∏?`;
            }
            const enc = encodeURIComponent(msg);
            document.getElementById('popWA').href = `https://wa.me/${phone}?text=${enc}`;
            document.getElementById('popTG').href = `https://t.me/+${phone}`; 
            document.getElementById('popVB').href = `viber://chat?number=%2B${phone}`;
        }

        function openOrderFormFromPopup() {
            document.getElementById('contactModal').classList.add('hidden');
            openOrderModal();
        }

        function openOrderModal() {
            const subject = tempSelectedProduct ? tempSelectedProduct.name : "Contact";
            document.getElementById('displayProduct').innerText = subject;
            document.getElementById('formSubject').value = subject;
            document.getElementById('orderModal').classList.remove('hidden');
        }

        // --- SUBMIT LOGIC (USER PROVIDED) ---
 async function submitForm(e) {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            const originalText = btn.innerText;
            
            // 1. –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
            btn.innerText = (currentLang === 'ro' ? "Se trimite..." : "–û—Ç–ø—Ä–∞–≤–∫–∞...");
            btn.disabled = true;

            // 2. –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø–æ–ª–µ–π
            // currentPrice, tempSelectedProduct –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω–æ –≤ —Å–∫—Ä–∏–ø—Ç–µ –≤—ã—à–µ
            const productBaseName = tempSelectedProduct ? tempSelectedProduct.name : "Contact";
            // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –æ–ø—Ü–∏—è –≤ –º–æ–¥–∞–ª–∫–µ —Ç–æ–≤–∞—Ä–∞, –¥–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä
            const fullProductName = selectedSizeLabel 
                ? `${productBaseName} [${selectedSizeLabel}]` 
                : productBaseName;

            const name = document.getElementById('inpName').value;
            const phone = document.getElementById('inpPhone').value;
            const address = document.getElementById('inpAddress').value || "-";

            // 3. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è Telegram (Markdown —Ñ–æ—Ä–º–∞—Ç, —Ç.–∫. –≤ submit.js —Å—Ç–æ–∏—Ç Markdown)
            // –ò—Å–ø–æ–ª—å—É–∑–µ–º *–∂–∏—Ä–Ω—ã–π* –≤–º–µ—Å—Ç–æ <b>–∂–∏—Ä–Ω—ã–π</b>
            const tgMessage = 
`üöÄ *NOUƒÇ COMANDƒÇ!* (Site)

üì¶ *Produs:* ${fullProductName}
üí∞ *Pre»õ:* ${currentPrice} MDL
üë§ *Nume:* ${name}
üìû *Telefon:* ${phone}
üí¨ *Comentariu:* ${address}`;

            // 4. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Google Sheets
            const sheetData = {
                Date: new Date().toLocaleString("ru-RU"), // –î–∞—Ç–∞ –≤ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
                Product: fullProductName,
                Price: currentPrice,
                Name: name,
                Phone: phone,
                Message: address
            };

            try {
                // 5. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –≤–∞—à –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –±—ç–∫–µ–Ω–¥ (/api/submit)
                const response = await fetch('/api/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: tgMessage,  // –¢–µ–∫—Å—Ç –¥–ª—è —Ç–µ–ª–µ–≥—Ä–∞–º–∞
                        sheetData: sheetData // –û–±—ä–µ–∫—Ç –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
                    })
                });

                const result = await response.json();

                if (!response.ok) {
                    throw new Error(result.error || 'Server Error');
                }

                // 6. –£—Å–ø–µ—Ö
                alert(currentLang === 'ro' ? "Mesajul a fost trimis cu succes!" : "–°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!");
                closeModal('orderModal');
                e.target.reset(); // –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É

            } catch (error) {
                console.error('Submission error:', error);
                alert(currentLang === 'ro' 
                    ? "Eroare la expediere. VƒÉ rugƒÉm sƒÉ ne scrie»õi pe WhatsApp." 
                    : "–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ WhatsApp.");
            } finally {
                // 7. –í–æ–∑–≤—Ä–∞—Ç –∫–Ω–æ–ø–∫–∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                btn.innerText = originalText;
                btn.disabled = false;
            }
        }

        const params = new URLSearchParams(window.location.search);
        changeLang(params.get('lang') || 'ro');
    </script>
</body>
</html>